<head>
<style>
li{
border-radius:10px;
background-color:khaki;
box-shadow:3px 3px 7px blue;
margin-bottom:3px;
font-size:12px;
width:70px;
padding-left:7px;
}
</style>
<head>
<body>
<p>Hello</p><button onclick="userGesture()">Start Receiving</button>
<ul>
<li id="li1"></li>
<li id="li2"></li>
<li id="li3"></li>
<li id="li4"></li>
<li id="li5"></li>
<li id="li6"></li>
<li id="li7"></li>
<li id="li8"></li>
<li id="li9"></li>
</ul>
<script>
var button = document.querySelector("button");
var p=document.querySelector("p");
var li1=document.querySelector("#li1");
var li2=document.querySelector("#li2");
var li3=document.querySelector("#li3");
var li4=document.querySelector("#li4");
var li5=document.querySelector("#li5");
var li6=document.querySelector("#li6");
var li7=document.querySelector("#li7");
var li8=document.querySelector("#li8");
var li9=document.querySelector("#li9");
var ul=[li1,li2,li3,li4,li5,li6,li7,li8,li9];

p.innerText="started";

function onMIDIFailure() {
  p.innerText="Not finding a MIDI controller";
}

var indx = -1;
function onMIDImessage(messageData) {
  if(indx==8){
    for(var j=0;j<8;j++){
      ul[j].innerText=ul[j+1].innerText;
      ul[j].style.backgroundColor="rgb("+ul[j].innerText+")";
    }
  } else {
    indx+=1;
  }
  ul[indx].innerText=messageData.data;
  ul[indx].style.backgroundColor="rgb("+messageData.data+")";
}

function onMIDISuccess(midiData) {
  var midi = midiData;
  p.innerText="midi controller active";
  var allInputs = midi.inputs.values();
  for (var input = allInputs.next(); input && !input.done;input=allInputs.next()){
    input.value.onmidimessage = onMIDImessage;
    //console.log(input.value);
  }
}

function userGesture() {
  var context = new AudioContext();
  if(context==null || context==undefined){
    p.innerText="not able to get audio context";
  } else{
    button.style.display="none";
    var oscillators = {};
    var midi, data;
    if (navigator!=undefined && navigator.requestMIDIAccess) {
      navigator.requestMIDIAccess({sysex: false}).then(onMIDISuccess, onMIDIFailure);
    } else {
      p.innerText="No MIDI support in your browser";
    }
  }
}

</script>                                                                                                                                                                                  